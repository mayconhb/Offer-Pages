<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocolo Memoria Eterna</title>
    
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://pay.hotmart.com">
    <link rel="preconnect" href="https://scripts.converteai.net">
    <link rel="preconnect" href="https://cdn.converteai.net">
    
    <link rel="dns-prefetch" href="https://pay.hotmart.com">
    <link rel="dns-prefetch" href="https://scripts.converteai.net">
    <link rel="dns-prefetch" href="https://cdn.converteai.net">
    <link rel="dns-prefetch" href="https://images.converteai.net">
    <link rel="dns-prefetch" href="https://api.vturb.com.br">

    <!-- Preload Critical Assets -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" as="style">
    <link rel="preload" href="https://scripts.converteai.net/8be91a4f-8063-443e-ad7c-0bc55451c92d/players/695c2168662fcb782a2e1d6a/v4/player.js" as="script">
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: white;
            min-height: 100vh;
            font-family: 'Montserrat', -apple-system, sans-serif;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
        }
        .header {
            background-color: #A60B0D;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .logo {
            font-weight: 800;
            font-size: 1.4rem;
            letter-spacing: 0.5px;
            font-family: 'Helvetica Neue', Arial, sans-serif;
            text-transform: uppercase;
        }
        .icon {
            cursor: pointer;
            padding: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .hamburger {
            width: 22px;
            height: 14px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .hamburger span {
            display: block;
            height: 2px;
            width: 100%;
            background-color: white;
            border-radius: 1px;
        }
        .search-icon {
            width: 18px;
            height: 18px;
            border: 2px solid white;
            border-radius: 50%;
            position: relative;
        }
        .search-icon::after {
            content: "";
            position: absolute;
            width: 2px;
            height: 6px;
            background-color: white;
            bottom: -4px;
            right: -3px;
            transform: rotate(-45deg);
        }
        .headline-section {
            text-align: center;
            padding: 40px 20px;
            max-width: 900px;
            margin: 0 auto;
        }
        .video-container {
            width: 100%;
            max-width: 800px;
            aspect-ratio: 16 / 9;
            margin: 40px auto 0 auto;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f0f0f0; /* Placeholder color to avoid CLS */
        }
        .live-counter {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 5px auto 10px auto;
            font-weight: 700;
            font-size: 0.9rem;
        }
        .live-dot {
            width: 8px;
            height: 8px;
            background-color: #A60B0D;
            border-radius: 50%;
            animation: dot-pulse 1.5s infinite;
        }
        .live-count-text {
            color: #A60B0D;
        }
        .live-label {
            color: #333;
        }
        @keyframes dot-pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }
        .cta-section {
            display: none;
            text-align: center;
            padding: 20px 20px 0px 20px;
            margin: 5px auto 0 auto;
        }
        .cta-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: #008000;
            color: white;
            font-size: 1rem;
            font-weight: 700;
            padding: 18px 40px;
            text-decoration: none;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s, background-color 0.2s;
            max-width: 100%;
            box-sizing: border-box;
            white-space: nowrap;
            text-align: center;
            animation: pulse 2s infinite;
        }

        @media (max-width: 600px) {
            .cta-button {
                font-size: 1.1rem;
                padding: 15px 30px;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 4px 25px rgba(0,128,0,0.4);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            }
        }

        .cta-button:hover {
            animation: none;
            transform: scale(1.08);
            background-color: #00a000;
        }
        .references-section {
            text-align: center;
            padding: 40px 20px;
            max-width: 900px;
            margin: 0 auto;
        }
        .references-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 20px;
        }
        .reference-image {
            width: 100%;
            max-width: 700px;
            height: auto;
            margin: 10px auto;
            display: block;
            border-radius: 4px;
        }
        .university-logos {
            max-width: 500px;
        }

        .sub-headline {
            color: #A60B0D;
            font-size: 1.25rem;
            font-weight: bold;
            font-style: italic;
            margin-bottom: 10px;
        }
        .main-headline {
            font-size: 1.85rem;
            font-weight: 700;
            font-style: italic;
            color: black;
            line-height: 1.3;
            margin: 0 0 15px 0;
            letter-spacing: -1px;
        }
        .highlight-box {
            background-color: #0047AB;
            color: white;
            display: inline-block;
            padding: 8px 25px;
            font-size: 2.1rem;
            font-weight: 900;
            font-style: italic;
            border-radius: 4px;
        }

        /* Popup Styles */
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 99999;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .popup-content {
            background: white;
            padding: 25px;
            border-radius: 12px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            max-height: 90vh;
            overflow-y: auto;
        }
        .popup-title {
            color: #A60B0D;
            font-size: 1.5rem;
            font-weight: 900;
            margin-bottom: 15px;
            text-transform: uppercase;
        }
        .popup-text {
            font-size: 1.15rem;
            color: #333;
            margin-bottom: 15px;
            font-weight: 700;
            line-height: 1.4;
        }
        .popup-subtext {
            font-size: 0.9rem;
            color: #A60B0D;
            margin-bottom: 20px;
            font-weight: 400;
            display: block;
        }
        .popup-close-link {
            display: inline-block;
            margin-top: 15px;
            color: #777;
            text-decoration: underline;
            font-size: 0.85rem;
            cursor: pointer;
        }
        .price-container {
            margin-bottom: 25px;
            display: flex;
            align-items: stretch;
            justify-content: center;
            position: relative;
            gap: 15px;
            max-width: 100%;
        }
        .price-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            text-align: center;
        }
        .price-divider {
            width: 1px;
            background-color: #eee;
            align-self: stretch;
            margin: 10px 0;
        }
        .price-column-title {
            font-size: 0.6rem;
            color: #888;
            margin-bottom: 8px;
            font-weight: 600;
            text-transform: uppercase;
            line-height: 1.2;
            min-height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .price-old {
            color: #999;
            font-size: 0.95rem;
            text-decoration: line-through;
            margin-bottom: 4px;
            white-space: nowrap;
        }
        .price-new-usd {
            color: #333;
            font-size: 1.4rem;
            font-weight: 800;
            white-space: nowrap;
        }
        .price-converted-value {
            color: #008000;
            font-size: 1.4rem;
            font-weight: 900;
            line-height: 1;
            white-space: nowrap;
        }
        .discount-badge {
            background: #FFD700;
            color: black;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 800;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 20px;
        }
        .popup-cta {
            background: #008000;
            color: white;
            text-decoration: none;
            padding: 15px 25px;
            border-radius: 8px;
            font-weight: 800;
            font-size: 1.1rem;
            display: block;
            transition: transform 0.2s;
            animation: pulse-small 2s infinite;
        }
        @keyframes pulse-small {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }

        @media (max-width: 600px) {
            .main-headline {
                font-size: 1.45rem;
            }
            .highlight-box {
                font-size: 1.6rem;
                padding: 8px 15px;
            }
            .sub-headline {
                font-size: 1.1rem;
            }
            .headline-section {
                padding: 20px 15px;
            }
        }
    </style>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s);j.async=true;j.src="https://tk.purelifenews.com/4lr2feobtexgq.js?"+i;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','c2pe4=GANFIiAvQi4%2FLDYhPyQ8QwdaSktFRAsLTBcNFxEOBgMUCR0SB0wMChw%3D');</script>
    <script>
        (function() {
            document.addEventListener('mousedown', function(e) {
                var target = e.target.closest('a');
                if (target && target.href) {
                    var checkoutTerms = ['pay.hotmart', 'kiwify', 'checkout', 'payment', 'pay'];
                    var isCheckout = checkoutTerms.some(function(term) { 
                        return target.href.toLowerCase().includes(term); 
                    });
                    if (isCheckout) {
                        var currentParams = window.location.search;
                        if (currentParams) {
                            if (!target.href.includes('xcod') && !target.href.includes(currentParams.replace('?', ''))) {
                                var separator = target.href.includes('?') ? '&' : '?';
                                target.href = target.href + separator + currentParams.replace(/^\?/, '');
                            }
                        }
                    }
                }
            });
        })();
    </script>
    <!-- End Google Tag Manager -->
</head>
<body>
    <header class="header">
        <div class="icon" title="Menu">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="logo">SALUD</div>
        
        <div class="icon" title="Pesquisar">
            <div class="search-icon"></div>
        </div>
    </header>

    <div class="headline-section">
        <div class="sub-headline">Dr. Gupta Libera el Video de la "Cucharada de la Memoria"</div>
        <h1 class="main-headline">Acceso gratuito por 24h: Mira la receta exacta de Miel + Condimento que está</h1>
        <div class="highlight-box">reseteando la memoria en días.</div>
        
        <div class="video-container" data-testid="container-video-placeholder">
            <vturb-smartplayer id="vid-695c2168662fcb782a2e1d6a" style="display: block; margin: 0 auto; width: 100%; max-width: 400px;"></vturb-smartplayer> 
            <script defer src="https://scripts.converteai.net/8be91a4f-8063-443e-ad7c-0bc55451c92d/players/695c2168662fcb782a2e1d6a/v4/player.js"></script>
        </div>

        <div class="live-counter" data-testid="container-live-counter">
            <div class="live-dot"></div>
            <span id="live-count" class="live-count-text">902</span>
            <span class="live-label">personas viendo ahora</span>
        </div>

        <script>
            function updateLiveCount() {
                const counter = document.getElementById('live-count');
                if (!counter) return;
                let current = parseInt(counter.innerText);
                const range = Math.floor(Math.random() * 3) + 1; 
                const direction = Math.random() > 0.4 ? 1 : -1;
                let next = current + (range * direction);
                if (next < 893) next = 893;
                if (next > 915) next = 915;
                counter.innerText = next;
                const nextTick = Math.floor(Math.random() * 2500) + 500;
                setTimeout(updateLiveCount, nextTick);
            }
            setTimeout(updateLiveCount, 1000);
        </script>

        <style>
            .currency-info {
                font-size: 0.9rem;
                color: #555;
                margin-bottom: 15px;
                font-weight: 500;
            }
            .currency-value {
                color: #008000;
                font-weight: 700;
            }
        </style>
        <section id="CTA" class="cta-section">
            <div class="currency-info">
                Precio en su moneda local<br>
                aproximadamente <span class="currency-value" id="cta-local-price">calculando...</span>
            </div>
            <a href="https://pay.hotmart.com/X103671940D?off=wrgs5ex0&checkoutMode=10" class="cta-button" data-testid="button-cta-protocolo">
                ACCEDER A MI PROTOCOLO
            </a>
        </section>
    </div>

    <div class="references-section">
        <h2 class="references-title">Referencias científicas</h2>
        <img src="/protocolo-memoria-eterna/assets/university-logos.webp" alt="University Logos" class="reference-image university-logos" loading="lazy" width="500" height="100" data-testid="img-university-logos">
        <img src="/protocolo-memoria-eterna/assets/scientific-references.webp" alt="Scientific References List" class="reference-image" loading="lazy" width="700" height="400" data-testid="img-scientific-references">
    </div>

    <!-- Discount Popup -->
    <div id="discountPopup" class="popup-overlay">
        <div class="popup-content">
            <div class="popup-title">¡ESPERA! NO TE VAYAS</div>
            <div class="popup-text">No quiero que el precio sea un impedimento para que recuperes tu memoria y claridad mental.</div>
            <span class="popup-subtext">Esta es una oferta única y exclusiva, disponible solo en esta página y en este momento.</span>
            <div class="discount-badge">¡41% DE DESCUENTO!</div>
            <div class="price-container">
                <div class="price-column">
                    <div class="price-column-title"></div>
                    <span class="price-old" id="popup-price-old">US$ 17,00</span>
                    <span class="price-new-usd" id="popup-price-new">US$ 9,90</span>
                </div>
                <div class="price-divider"></div>
                <div class="price-column">
                    <div class="price-column-title">Precio aproximado en su moneda local</div>
                    <span class="price-old" id="popup-local-price-old">calculando...</span>
                    <div class="price-converted-value" id="popup-local-price-new">calculando...</div>
                </div>
            </div>
            <a href="https://pay.hotmart.com/X103671940D?off=zitevzea&checkoutMode=10" class="popup-cta">
                SÍ, QUIERO MI DESCUENTO
            </a>
            <span class="popup-close-link" onclick="document.getElementById('discountPopup').style.display='none'">
                No, gracias. Prefiero continuar con pérdida de memoria.
            </span>
        </div>
    </div>

    <script>
        // Automatic Currency Converter
        (function() {
            async function convertCurrency() {
                try {
                    const response = await fetch('https://ipapi.co/json/');
                    const data = await response.json();
                    const currency = data.currency;
                    
                    if (currency && currency !== 'USD') {
                        const rateRes = await fetch(`https://open.er-api.com/v6/latest/USD`);
                        const rateData = await rateRes.json();
                        const rate = rateData.rates[currency];
                        
                        if (rate) {
                            // Adding a 6.5% markup to approximate Hotmart's exchange rate and fees
                            const hotmartRate = rate * 1.065;
                            const mainPrice = (17 * hotmartRate).toLocaleString(undefined, { style: 'currency', currency: currency });
                            const popupOldPrice = (17 * hotmartRate).toLocaleString(undefined, { style: 'currency', currency: currency });
                            const popupNewPrice = (9.90 * hotmartRate).toLocaleString(undefined, { style: 'currency', currency: currency });
                            
                            document.getElementById('cta-local-price').innerText = mainPrice;
                            
                            // Update popup prices
                            const oldPriceEl = document.getElementById('popup-price-old');
                            const newPriceEl = document.getElementById('popup-price-new');
                            const localOldPriceEl = document.getElementById('popup-local-price-old');
                            const localNewPriceEl = document.getElementById('popup-local-price-new');
                            
                            if (oldPriceEl) oldPriceEl.innerText = 'US$ 17,00';
                            if (newPriceEl) newPriceEl.innerText = 'US$ 9,90';
                            if (localOldPriceEl) localOldPriceEl.innerText = popupOldPrice;
                            if (localNewPriceEl) localNewPriceEl.innerText = popupNewPrice;
                        }
                    } else {
                        document.getElementById('cta-local-price').innerText = 'US$ 17,00';
                        // No popup-local-price anymore, it's integrated into the HTML above
                    }
                } catch (e) {
                    console.error('Currency conversion failed', e);
                    document.getElementById('cta-local-price').innerText = 'US$ 17,00';
                }
            }
            convertCurrency();
        })();

        // Intercept Back Button Logic
        (function() {

            // Push an extra state to the history
            window.history.pushState({ page: 'vsl' }, '', window.location.href);
            
            window.onpopstate = function(event) {
                const ctaSection = document.getElementById('CTA');
                
                // Check if CTA is visible (Vturb reveals it by changing display from none)
                const isCtaVisible = ctaSection && window.getComputedStyle(ctaSection).display !== 'none';
                
                if (isCtaVisible) {
                    // Prevent leaving and show popup
                    window.history.pushState({ page: 'vsl' }, '', window.location.href);
                    document.getElementById('discountPopup').style.display = 'flex';
                } else {
                    // Allow leaving if CTA is not yet visible
                    window.history.back();
                }
            };

            // Exit Intent for Desktop
            document.addEventListener('mouseleave', function(e) {
                if (e.clientY < 0) {
                    const ctaSection = document.getElementById('CTA');
                    const isCtaVisible = ctaSection && window.getComputedStyle(ctaSection).display !== 'none';
                    if (isCtaVisible) {
                        document.getElementById('discountPopup').style.display = 'flex';
                    }
                }
            });
        })();
    </script>
</body>
</html>
